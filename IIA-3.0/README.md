# IIA3.0  
## 环境

### UI

拥有pyqt框架与wxpython框架其中之一即可

```bash
# 选项一：安装pyqt
pip3 install pyqt5
pip3 install PyQtWebEngine

# 选项二：（M1 Mac推荐采用本方案）
pip3 install wxpython
```

### Socket

IIA通过websocket进行程序内通信

```bash
pip3 install websocket-server
```

## 运行

* **IIA Start**

  即使运行时的目录不在IIA.py，程序在运行时也会自动切换到IIA.py所在的目录。

```bash
sudo python3 IIA.py
sudo python3 /Users/kimshan/workplace/IIA/IIA-3.0/IIA.py
```

* **IIA test mode**

```bash
sudo python3 IIA.py test
```

* **clear cache(log.txt)**

```bash
sudo python3 IIA.py clear
```

* **运行成功时显示内容**

```bash
---------------------------------------

Welcome to IIA Server!

      ___________ 
     /  _/  _/   |
     / / / // /| |
   _/ /_/ // ___ |
  /___/___/_/  |_|
                

Author: Charles Shan
Mail: charles.shht@gmail.com

---------------------------------------

HTTP Server is running at:
 http://192.168.110.114:80 

---------------------------------------

The Node Server log:
Listening on port 3092 for clients..
```



## IIA项目架构
* [ui - 界面模块](./ui/README.md)
* [auth - 认证模块][./auth/README.md] 
* [setting - 设置模块](./setting/README.md)
* [logger - 记录模块](./logger/README.md)
* server - 服务器模块
* mission - 任务模块
* reminder - 提醒事项模块
* warehouse - 高级仓库模块
* mapping - 导图模块
* process - 数据处理模块
* template - 模板模块
* show - 展示模块
* auxiliary - 辅助模块
* storage - 底层仓库模块

## IIA系统使用说明

### 总览

IIA的根本目标是构建元宇宙的个人数字结点。IIA由多个`项目`构成，每个项目代表生活中的一个元素（比如账本，衣橱，笔记系统，备忘录），每个项目彼此具有强关联的能力。每个`项目`由多个`组件`构成(比如账本这个项目，可以由一些账本组件，数据分析组件，可视化组件构成)。您可以直接使用构件好的项目模板，当然，也可以自己通过组件构建自定义的项目。



### 功能介绍-主体

您可以通过IIA构建日程规划（To-do list，打卡，提醒事项），进行数据分析（科学数据分析），记录生活（账本，智能衣橱），学习归纳（搭建个人知识库-笔记系统）。

| 功能类型           | 对标应用           |
| ------------------ | ------------------ |
| 应用平台           | chrome插件         |
| 账本应用插件       | 鲨鱼记账           |
| 智能衣橱插件       | 尽简衣橱           |
| 日程规划插件       | 滴答清单，指尖时光 |
| 项目规划插件       | Taskade，PingCode  |
| 数据分析插件       | Tableau            |
| 学习归纳插件       | 思源笔记，Notion   |
| 备忘录插件         | 备忘录（Apple）    |
| 密码管理插件       | 1Password          |
| 世界时间插件       | 时钟（Apple）      |
| 日记插件           | /                  |
| 食谱插件           | /                  |
| 电影清单插件       | /                  |
| 乐谱管理插件       | /                  |
| 链接管理插件       | /                  |
| 天气插件           | 天气（Apple）      |
| 本地音乐播放器插件 | QQ音乐             |
|                    |                    |

#### 项目

* 逻辑❌：每一个项目是一组相关联的事物的组合，对内描述事件，处理问题，对外展示细节，彼此相互关联。
* 身份(V1)❌：每一个项目对应一个主用户。
* 身份(V2)❌：每一个项目对应一个主用户与几个共享用户，用户拥有不同权限。
* 版本管理(V1)❌：项目拥有版本同步功能，支持不同主机服务器之间全局同步。
* 版本管理(V2)🔖：增强的项目版本同步功能，支持不同主机服务器之间差异同步（遥远的未来）。

#### 资源表

* 逻辑❌：？？？？
* 图片❌：？？？？
* 视频❌：？？？？
* 音频❌：？？？？
* 公式❌：？？？？
* 预览文件❌：提供pdf等，各种广义的文件存储格式（附件）。
* 文档文件❌：提供markdown支持。

#### 静态表

* 逻辑❌：每一个项目中可以包含一个或多个静态表。静态表参考excel最基础的功能。用于存放高结构化的数据。
* 获取行（接口）❌：可以根据一定的规则，筛选出静态表中的一项或多项(一行)。
* 公式（接口）❌：可以根据公示返回对某属性（一列）的计算结果。

#### 时间表

* 逻辑❌：？？？？
* 单次与循环❌：单次与循环标签，循环表项内容指向子时间表，无限内容采用公式存储，修改部分通过子时间表记录细节。
* 归属时间段❌：某件事情起止时间。其实时间点默认精确到日，也可以自定义。
* 特殊日期表❌：主要是阳历，阴历的重要节日，用户可以添加生日等自定义内容。

#### 日程与计划安排模板

* 基础❌：新建项目->建立时间表。
* 单次/循环截止日期功能❌：截止日期重点某时间点前完成某件事。单次举例“下周四前提交xxx大作业”；循环举例“每周四前提交xxx小作业”，“双周周末xxx提交”。
* 单次/循环计划❌：计划，强调某时间段内完成某件事。举例“明天去一趟超市购买...”，“周六日去xxx玩”。举例“每天背单词”，“某月某日几点到几点参加xxx考试”，“每周一八点到十点体育课”。
* 打卡❌：打卡，强调某一任务多次完成。
* 固定特殊日期（阳历，阴历）❌：举例“生日”，“春节”。

#### 插件系统

* 基础❌：插件是基于标准的项目api搭建的对应具体功能的模板

#### 账本模板

* 基础❌：？？？？

#### 数据分析模板

* 基础❌：？？？？

#### 数据看板

* 逻辑❌：根据`模块`中规定的接口，在数据看板中显示关键数据，并以可视化的形式展示。



### 功能介绍-周边

IIA可以进行用户区分，存储为本地存储。

#### 存储方案

- 存储(v1)✅：目前只采用本地存储，所有文件存于本地服务器上，不用本地服务器数据不互通。
- 存储(v2)❌：支持本地存储，并支持不同的服务器的数据互通功能。
- 存储(v3)❌：支持用户机遇iCloud或OneDrive等网盘的数据备份。
- 存储(v4)🔖：支持一定规模的用户的自动备份（需要建立官方数据中心，遥远的未来）。

#### 身份验证

- 逻辑(V1)✅：每个用户需要输入邮箱来确定一个账户, 邮箱与账户一一对应。
- 登陆(V1)✅：输入邮箱与密码登陆账户。可以设置默认填充邮箱。
- 注册(V1)✅：输入邮箱、验证码、密码、用户名来建立新账户。
- 找回密码(V1)✅：通过邮箱找回密码。

#### 运行模式

- ✅客户端可以选择**是否开放局域网**，开放局域网后同一局域网可以通过账号密码登陆到开放局域网的主机中。
- ❌客户端可以选择**连接其他主机**，连接成功后可以访问其他主机的共享数据。
- ❌客户端可以选择**禁止其他主机访问**，设置后其他主机将无法访问您的共享数据。
- ✅客户端可以选择**本地默认打开位置**，可以选择在生成应用窗口或者直接在浏览器中打开。
- ✅浏览器可以通过**访问IP地址**连接到指定的客户端

#### 纠错检错

- 测试程序❌：运行测试程序查看环境是否达标，提示缺失的配置并且给出解决方案。
- 运行记录(V1)✅：产生运行时记录。
- 运行记录(V2)❌：测试程序可以根据log进行故障排除等。
- 运行记录(V3)❌：产生测试程序可以使用运行记录，并且程序可以通过运行记录进行一定的撤回操作。



### 功能介绍-实验室

#### 智能输入

* 根据日常生活细节提炼ddl
* 通过摄像头等外设自动获取数据
* 上课语音识别作业

#### 外部输出go

* 与Minecraft进行交互



### 社区（暂不提供）🔖

* 🔖提供IIA介绍（宣传主页），提供实用教程与案例。
* 🔖提供插件开发教程，支持插件上传与下载。
* 🔖提供数据共享，模板共享等功能，您使用的模板或构件好的知识库可以共享到社区。

 

## IIA系统实现说明

### 底层仓库

[具体信息](./storage/README.md)

面向普遍功能的仓库，向下实现具体数据的存储细节，向上提供普遍的仓库接口。

* __数据仓库__: 数据仓库是工作区的基本单位。  
* __数据仓库可见__: 每一个数据仓库会标识账户属性, 您可以设置仅自己可见, 仅部分好友可见或全部可见。  
* __数据仓库版本__: 数据仓库对应一个本地版本树, 您可以进行版本控制。  
* __设备同步__(未来): 数据仓库可以上传到指定IP的服务器上, 当然您需要提前在目的服务器上注册同样的用户信息。

### 高级仓库

面向特定功能的仓库支持。具体实现通过逻辑上调用底层仓库实现，不进行具体存储格式的考虑。

* __表格仓库__：定义专门存储高结构化的数据表的仓库
* __资源仓库__：定义存储附件及数据集的仓库
* __时间仓库__：定义了存储与时间相关的数据表的仓库（面向生活，比如提醒实现，日程管理等）

### 映射模块

根据指定指标或指定的公式将某个仓库的特定信息应设成一个个信息元，交付展示模块。

### 记录模块

记录与分析程序运行的状态。

* __记录运行位置__：展示运行信息产生的模块位置。
* __记录运行状态__：运行信息分为“普通”，“警告”，“错误”，“崩溃”四种。
* __记录具体信息__：展示程序运行时的状态或发生的事情。
* __记录产生时间__：运行记录产生的时间。
* __展示记录信息__：在调试模块中筛选，监测，分析已有记录。 

[./auth/README.md]: 
